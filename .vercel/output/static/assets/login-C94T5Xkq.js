import{r as t,s as y,j as e,Q as E,C as S,e as L,f as P,i as A,L as d,I as p,v as F,B as U,k as q,l as R,m as B,n as I,w as D,p as o,x as M,y as W,z as H,A as m}from"./index-CLtyk14W.js";import{C as w}from"./checkbox-B_x3_b7U.js";import"./check-D-40C26n.js";const Q="/cheques/assets/logo-C7stxRpk.png";function O(){const[l,j]=t.useState(""),[u,k]=t.useState(""),[h,v]=t.useState(!1),[x,r]=t.useState(null),[c,g]=t.useState(!1),[f,z]=t.useState(!1),b=y(),N=async s=>{s.preventDefault(),g(!0),r(null);try{const n=q(R,"clientes"),a=(await(await B(n)).docs.map(i=>({id:i.id,...i.data()}))).find(i=>i.email===l);if(f){if(!a){I.error("Usuário não cadastrado como cliente");return}console.log("Primeiro acesso do cliente"),await D(o,a.email,a.senha),await M(o,h?W:H),await m(o,a.email,a.senha),b("/");return}if(a)console.log("Usuário é cliente"),await m(o,a.email,a.senha);else{console.log("Usuário não é cliente, tentando logar como membro"),await m(o,l,u),b("/");return}}catch(n){console.error("Erro ao fazer login:",n),C(n)}finally{g(!1)}},C=s=>{switch(s.code){case"auth/invalid-email":r("Endereço de email inválido.");break;case"auth/user-disabled":r("Este usuário está desativado.");break;case"auth/user-not-found":r("Usuário não encontrado.");break;case"auth/wrong-password":r("Senha incorreta.");break;default:r("Falha no login. Por favor, tente novamente.")}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br bg-zinc-200 dark:from-zinc-800 dark:to-zinc-900 transition-colors duration-500 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsx(E,{}),e.jsxs(S,{className:"max-w-md w-full  p-4 shadow-xl transition-shadow duration-300 hover:shadow-2xl dark:bg-zinc-800",children:[e.jsx(L,{children:e.jsx(P,{className:"text-3xl font-extrabold tracking-wide text-indigo-900 dark:text-white",children:"Entrar"})}),e.jsx(A,{children:e.jsxs("form",{className:"mt-2 space-y-6",onSubmit:N,children:[x&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm font-medium text-red-800",children:x})})})}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email-address",className:"sr-only",children:"Endereço de emmt-8ail"}),e.jsx(p,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 placeholder-zinc-500 dark:placeholder-zinc-400 text-zinc-900 dark:text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-zinc-700 transition-colors duration-200",placeholder:"Endereço de email",value:l,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",className:"sr-only",children:"Senha"}),e.jsx(p,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 placeholder-zinc-500 dark:placeholder-zinc-400 text-zinc-900 dark:text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-zinc-700 transition-colors duration-200",placeholder:"Senha",value:u,onChange:s=>k(s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{id:"remember-me",name:"remember-me",checked:h,onCheckedChange:s=>v(s)}),e.jsx(d,{htmlFor:"remember-me",className:"ml-2 block text-sm text-zinc-900 dark:text-zinc-300",children:"Lembrar-me"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{id:"remember-me",name:"remember-me",checked:f,onCheckedChange:s=>z(s)}),e.jsx(d,{htmlFor:"remember-me",className:"ml-2 block text-sm text-zinc-900 dark:text-zinc-300",children:"Primeiro Acesso"})]})]}),e.jsx("div",{className:"text-sm flex justify-center",children:e.jsx(F,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors duration-200",children:"Esqueceu sua senha?"})}),e.jsx("div",{children:e.jsx(U,{type:"submit",disabled:c,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${c?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-colors duration-200`,children:c?"Entrando...":"Entrar"})})]})})]}),e.jsx("div",{className:" absolute bottom-2 w-full flex justify-center",children:e.jsx("img",{src:Q,alt:"Logo Construbank",className:"w-auto h-9 cursor-not-allowed"})})]})}export{O as default};
