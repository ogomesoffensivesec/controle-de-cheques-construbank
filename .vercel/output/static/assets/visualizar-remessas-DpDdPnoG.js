import{r,i as j,j as e,B as u,d as R,e as b,f as w}from"./index-BbvhRV2G.js";import{Q as N,B as y}from"./ReactToastify-BnRepkc8.js";import{u as v,f as h,g as D,a as C,b as M,c as S}from"./index-D3YQF69_.js";import{T as P,a as T,b as t,c as K,d as B,e as x}from"./table-BNri_U7Y.js";const A=()=>{var i;const[n,g]=r.useState([]),[f,l]=r.useState(!0),c=j();r.useEffect(()=>{(async()=>{l(!0);try{const s=R(b,"remessas"),p=(await w(s)).docs.map(m=>({id:m.id,...m.data()}));g(p)}catch(s){console.error("Erro ao buscar remessas:",s),y.error("Ocorreu um erro ao buscar as remessas.")}finally{l(!1)}})()},[]);const d=[{accessorKey:"protocolo",header:"Protocolo"},{accessorKey:"dataRemessa",header:"Data da Remessa",cell:({row:a})=>new Date(a.getValue("dataRemessa")).toLocaleDateString("pt-BR")},{accessorKey:"emitidoPor",header:"Emitido por"},{accessorKey:"status",header:"Status"},{accessorKey:"documentoPdfUrl",header:"Documento Protocolo",cell:({row:a})=>{const s=a.getValue("documentoPdfUrl");return s?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Download"}):"Não disponível"}},{accessorKey:"documentoAssinadoUrl",header:"Documento assinado",cell:({row:a})=>{const s=a.getValue("documentoAssinadoUrl");return s?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Download"}):"Não disponível"}},{id:"actions",header:"Ações",cell:({row:a})=>{const s=a.original;return e.jsx(u,{variant:"outline",size:"sm",onClick:()=>c(`/remessas/${s.id}`),children:"Detalhes"})}}],o=v({data:n,columns:d,getCoreRowModel:D(),getSortedRowModel:C(),getFilteredRowModel:M(),getPaginationRowModel:S()});return e.jsxs("div",{className:"w-full min-h-screen p-4 space-y-6",children:[e.jsx(N,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Remessas"}),e.jsx(u,{onClick:()=>c("/remessas/nova-remessa"),children:"Iniciar Nova Remessa"})]}),f?e.jsx("p",{children:"Carregando..."}):e.jsx(e.Fragment,{children:n.length===0?e.jsx("p",{children:"Nenhuma remessa encontrada."}):e.jsx("div",{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(P,{children:[e.jsx(T,{children:o.getHeaderGroups().map(a=>e.jsx(t,{children:a.headers.map(s=>e.jsx(K,{children:s.isPlaceholder?null:h(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(B,{children:(i=o.getRowModel().rows)!=null&&i.length?o.getRowModel().rows.map(a=>e.jsx(t,{children:a.getVisibleCells().map(s=>e.jsx(x,{children:h(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(t,{children:e.jsx(x,{colSpan:d.length,className:"h-24 text-center",children:"Nenhuma remessa encontrada."})})})]})})})})]})};export{A as default};
