import{r as t,s as R,u as b,j as e,Q as w,B as u,k as N,l as y,m as v,n as C}from"./index-DJKqiahU.js";import{u as D,f as h,g as M,a as S,b as P,c as T}from"./index-BstXQ-XF.js";import{T as K,a as k,b as n,c as B,d as E,e as x}from"./table-BGYD21z8.js";const F=()=>{var i;const[l,g]=t.useState([]),[f,c]=t.useState(!0),o=R(),{currentUser:j}=b();t.useEffect(()=>{j.isClient&&o("/"),(async()=>{c(!0);try{const s=N(y,"remessas"),p=(await v(s)).docs.map(m=>({id:m.id,...m.data()}));g(p)}catch(s){console.error("Erro ao buscar remessas:",s),C.error("Ocorreu um erro ao buscar as remessas.")}finally{c(!1)}})()},[]);const d=[{accessorKey:"protocolo",header:"Protocolo"},{accessorKey:"dataRemessa",header:"Data da Remessa",cell:({row:a})=>new Date(a.getValue("dataRemessa")).toLocaleDateString("pt-BR")},{accessorKey:"emitidoPor",header:"Emitido por"},{accessorKey:"status",header:"Status"},{accessorKey:"documentoPdfUrl",header:"Documento Protocolo",cell:({row:a})=>{const s=a.getValue("documentoPdfUrl");return s?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Download"}):"Não disponível"}},{accessorKey:"documentoAssinadoUrl",header:"Documento assinado",cell:({row:a})=>{const s=a.getValue("documentoAssinadoUrl");return s?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Download"}):"Não disponível"}},{id:"actions",header:"Ações",cell:({row:a})=>{const s=a.original;return e.jsx(u,{variant:"outline",size:"sm",onClick:()=>o(`/remessas/${s.id}`),children:"Detalhes"})}}],r=D({data:l,columns:d,getCoreRowModel:M(),getSortedRowModel:S(),getFilteredRowModel:P(),getPaginationRowModel:T()});return e.jsxs("div",{className:"w-full min-h-screen p-4 space-y-6",children:[e.jsx(w,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Remessas"}),e.jsx(u,{onClick:()=>o("/remessas/nova-remessa"),children:"Iniciar Nova Remessa"})]}),f?e.jsx("p",{children:"Carregando..."}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("p",{children:"Nenhuma remessa encontrada."}):e.jsx("div",{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(K,{children:[e.jsx(k,{children:r.getHeaderGroups().map(a=>e.jsx(n,{children:a.headers.map(s=>e.jsx(B,{children:s.isPlaceholder?null:h(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(E,{children:(i=r.getRowModel().rows)!=null&&i.length?r.getRowModel().rows.map(a=>e.jsx(n,{children:a.getVisibleCells().map(s=>e.jsx(x,{children:h(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(n,{children:e.jsx(x,{colSpan:d.length,className:"h-24 text-center",children:"Nenhuma remessa encontrada."})})})]})})})})]})};export{F as default};
